{% extends "base.html" %}
{% block page_title %}
    {{post.title}}
{% endblock page_title %}
{% block content %}
{% load static %}
<div class="overflow-y-auto overflow-x-hidden w-2/3 m-auto h-full">
  <div class="post_content w-full m-auto h-full bg-blue-50">
    <div class="text-2xl font-mono"> {{post.title}} </div>
    <hr class="border-solid border-1 border-neutral-200">
    promotion detail page: {{ post.content | safe }}
  </div>
  <div class="w-1/3">
    {% if post.author == user %}
        <a href="{% url 'posts:edit' post.pk %}" class="btn-link block">Edit post</a>
        <a href="{% url 'posts:post_delete' post.pk %}" class="btn-link block">Delete post</a>
    {% endif %}
  </div>
    {% if comments %}
      <div class="row mt-5">
        <div class="col-lg-6 offest-lg-3">
          Comment{{ comments.count|pluralize }}
          <span class="badge badge-dark ml-2">{{ comments.count }}</span>
        </div>
        {% for comment in comments %}
        <div class="flex items-center mb-2">
          <img class="object-cover rounded-circle w-7 h-7 rounded-lg" src="{{ comment.writer.get_profile }}">
               <!--src="{% static 'comment.writer.get_avatar' %}" alt="Avatar"></div>-->
          <div class="ml-3">{{ comment.writer.first_name }}</div>
          <div class="ml-3 text-xs">{{ comment.created }}</div>
        </div>
        <div class="col-12 border-b-1 border-slate-300 mb-4 ml-10">
            <p class="">{{ comment.comment }}</p>
          {% if comment.writer == user %}
            <p class="ml-3 text-xs"><a href="{% url 'comments:comment_delete' comment.id %}">삭제 </a></p>
          {% endif %}
        </div>
          {% endfor %}
    {% endif %}
      {% if user.is_verified %}
          <form method='POST'>
            {% csrf_token %}
              <div class="flex">
                <img class="object-cover rounded-circle w-7 h-7 rounded-lg" src="{{ user.get_profile }}">
                <textarea class="form-control w-full border-2 h-24 border-neutral-200 {% if form.comment.errors %}is-invalid{% endif %}" id="id_content"
                  name="comment">{{ form.comment.value|default:'댓글을 남기세요' }}</textarea>
              </div>
              <button class="border-none w-24 h-10 bg-amber-300 float-right btn-primary" type="submit">Reply</button>
          </form>
      {% else %}
          로그인하시면 댓글을 남길 수 있습니다
      {% endif %}
      </div>
  </div>
{% endblock %}
